<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/static/asset/bootstrap/4.0.0/css/bootstrap.css">

    <!-- LightStar theme -->
    <link rel="stylesheet" href="/static/css/boot.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/modal.css">
</head>
<body>
<div class="container mt-5">
    <button class="btn btn-outline-success" data-toggle="modal" data-target="#modal">Setting</button>
    <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                    Create instance
            </div>
            <div class="modal-body">
            <div class="card">
                <div class="card-header">
                    <ul id="nav-tabs" class="nav nav-pills card-header-pills">
                        <li class="nav-item">
                            <a id="head1" class="nav-link text-center" href="#page1">
                                1.Configure Guest
                            </a>
                        </li>
                        <li class="nav-item">
                            <a id="head2" class="nav-link text-center" href="#page2">2.Select DataStore</a>
                        </li>
                        <li class="nav-item">
                            <a id="head3" class="nav-link text-center" href="#page3">3.Custom Setting</a>
                        </li>
                    </ul>
                </div>
                <form id="form">
                <div id="page1" class="card-body text-center d-none">
                    <div class="form-group row">
                        <label for="name" class="col-sm-4 col-form-label-sm">Name</label>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <input type="text" class="form-control form-control-sm"
                                       name="name" value="guest.01"/>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="family" class="col-sm-4 col-form-label-sm">Guest OS</label>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <select class="select-lg" name="family">
                                    <option value="linux" selected>Linux</option>
                                    <option value="windows">Windows</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="page2" class="card-body text-center d-none">
                    <div class="form-group row">
                        <label for="datastore" class="col-sm-4 col-form-label-sm">
                            Datastore
                        </label>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <select class="select-lg" name="datastore">
                                    <option value="datastore/01" selected>datastore01</option>
                                    <option value="datastore/02">datastore02</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="page3" class="card-body text-center d-none">
                    <div class="form-group row">
                        <label for="cpu" class="col-sm-2 col-md-4 col-form-label-sm">
                            Processors
                        </label>
                        <div class="col-sm-10 col-md-6">
                            <div class="input-group">
                                <select class="select-sm" name="cpu">
                                    <option value="1">1</option>
                                    <option value="2" selected>2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                                <select class="select-twice-md" name="cpuMode">
                                    <option value="" selected>Default</option>
                                    <option value="host-passthrough">Enable Intel VT-x or AMD-V</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="MaxMem" class="col-sm-4 col-md-4 col-form-label-sm">Memory size</label>
                        <div class="col-sm-10 col-md-6">
                            <div class="input-group">
                                <input type="text" class="form-control form-control-sm input-number-lg"
                                       name="memSize" value="2048"/>
                                <select class="select-unit-right" name="memUnit">
                                    <option value="MiB" selected>MiB</option>
                                    <option value="GiB">GiB</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="diskSize" class="col-sm-4 col-md-4 col-form-label-sm">
                            Hardware disk01
                        </label>
                        <div class="col-sm-10 col-md-6">
                            <div class="input-group">
                                <input type="text" class="form-control form-control-sm input-number-lg"
                                       name="disk1Size" value="10"/>
                                <select class="select-unit-right" name="disk1Unit">
                                    <option value="Mib">MiB</option>
                                    <option value="GiB" selected>GiB</option>
                                    <option value="TiB">TiB</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="disk0File" class="col-sm-4 col-md-4 col-form-label-sm">
                            Datastore ISO file
                        </label>
                        <div class="col-sm-10 col-md-6">
                            <div class="input-group">
                                <select class="" name="disk0File">
                                    <option value="/dev/sr0">sr0</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="interface0Source" class="col-sm-4 col-md-4 col-form-label-sm">
                            Network interface01
                        </label>
                        <div class="col-sm-10 col-md-6">
                            <div class="input-group">
                                <select class="" name="interface0Source">
                                    <option value="virbr0" selected>Linux Bridge #virbr0</option>
                                    <option value="virbr1">Linux Bridge #virbr1</option>
                                    <option value="virbr2">Linux Bridge #virbr2</option>
                                    <option value="virbr3">Linux Bridge #virbr3</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                </form>
                </div>
            </div>
            <div class="modal-footer text-right">

                    <button id="btn-prev" class="btn btn-outline-dark btn-sm">Previous</button>
                    <button id="btn-next" class="btn btn-outline-dark btn-sm">Next</button>
                    <button id="btn-cancel" class="btn btn-outline-dark btn-sm">Cancel</button>
                    <button id="btn-submit" class="btn btn-outline-success btn-sm">Submit</button>

            </div>
        </div>
    </div>
</div>
<script src="/static/asset/jquery-1.12.4.js"></script>
<script src="/static/asset/ui/1.12.1/jquery-ui.js"></script>

<script src="/static/asset/popper.js/1.12.9/umd/popper.js"></script>
<!-- Bootstrap Javascript -->
<script src="/static/asset/bootstrap/4.0.0/js/bootstrap.js"></script>

<script type="module">

    class WizardForm {
        constructor(props) {
            this.default = props.default;
            this.navtabs = props.navigation;
            this.form = props.form;
            this.active = props.active || props.default;
            this.prev = props.buttons.prev;
            this.next = props.buttons.next;
            this.submit = props.buttons.submit;
            this.cancel = props.buttons.cancel;

            this.pages = [];
            $(this.navtabs).each((i, event) => {
                let id = '#' + $(event).attr('id');
                this.pages.push(id);
            });

            // register click
            for (let i in this.pages) {
                let page = this.pages[i];
                $(page).on('click', (event) => {
                    $(this.active).removeClass('active');
                    $($(this.active).attr('href')).addClass('d-none');

                    this.active = page;
                    $(page).addClass('active');
                    $($(page).attr('href')).removeClass('d-none');
                });
            }
            // reset default page
            this.active = this.default;
            $(this.default).addClass('active');
            $($(this.default).attr('href')).removeClass('d-none');

            // register prev and next.
            $(this.prev).on('click', (event) => {
                let pos = this.pages.indexOf(this.active);
                if (pos > 0) {
                    let page = this.pages[pos-1];
                    $(this.active).removeClass('active');
                    $($(this.active).attr('href')).addClass('d-none');
                    this.active = page;
                    $(page).addClass('active');
                    $($(page).attr('href')).removeClass('d-none');
                }
            });
            $(this.next).on('click', (event) => {
                let pos = this.pages.indexOf(this.active)+1;
                if (pos < this.pages.length) {
                    let page = this.pages[pos];
                    $(this.active).removeClass('active');
                    $($(this.active).attr('href')).addClass('d-none');
                    this.active = page;
                    $(page).addClass('active');
                    $($(page).attr('href')).removeClass('d-none');
                }
            });
        }

        load (callback) {
            $(this.submit).on('click', (event) => {
                let data = $(this.form).serializeArray();
                if (callback && callback.submit) {
                    callback.submit({event, data});
                }
            });
            $(this.cancel).on('click', (event) => {
                if (callback && callback.cancel) {
                    callback.cancel({event});
                }
            });
        }
    }

    $(document).ready(function() {
        new WizardForm({
            default: "#head1",
            navigation: "#nav-tabs li a",
            form: "#form",
            buttons: {
                prev: '#btn-prev',
                next: '#btn-next',
                submit: '#btn-submit',
                cancel: '#btn-cancel'
            },
        }).load({
            submit: function (e) {
                console.log(e);
            },
            cancel: function (e) {
                console.log(e);
            },
        });

    });
</script>
</body>
</html>