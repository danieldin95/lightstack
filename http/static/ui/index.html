<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home - LightStar</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/static/asset/bootstrap/4.0.0/css/bootstrap.css">
    <!-- LightStar theme -->
    <link rel="stylesheet" href="/static/css/boot.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/instance.css">
    <link rel="stylesheet" href="/static/css/modal.css">
</head>
<body>

<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
</nav>

<hyper name="{{.Hyper.Name}}">
    <!--Loading-->
</hyper>
<div class="container">
    <!-- Loading -->
</div>

<div class="modals">
    <!-- Create instance modal -->
    <div id="instanceCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <!-- Create datastore modal -->
    <div id="dirCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <!-- Upload file modal -->
    <div id="fileUploadModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <div id="nfsCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <div id="iscsiCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <!-- Create network modal -->
    <div id="natCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <div id="bridgeCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <div id="routedCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <div id="isolatedCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <!-- Console modal -->
    <div id="consoleModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-console">
            <div class="modal-content">
                <div class="modal-body"></div>
            </div>
        </div>
    </div>
    <!-- Set instance modal -->
    <div id="instanceSetModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <!-- Create disk modal -->
    <div id="diskCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
    <!-- Create interface modal -->
    <div id="interfaceCreateModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
</div>

<!-- JQuery Javascript -->
<script src="/static/asset/jquery-1.12.4.js"></script>
<script src="/static/asset/ui/1.12.1/jquery-ui.js"></script>

<script src="/static/asset/popper.js/1.12.9/umd/popper.js"></script>
<!-- Bootstrap Javascript -->
<script src="/static/asset/bootstrap/4.0.0/js/bootstrap.js"></script>
<!-- ART Template Javascript -->
<script src="/static/asset/template-web.js"></script>

<script type="module">
    import {Filters} from "/static/js/ctl/filter.js";
    import {Location} from "/static/js/com/location.js";
    import {Navigation} from "/static/js/widget/navigation.js";
    import {Index} from "/static/js/widget/container/index.js";
    import {Guest} from "/static/js/widget/container/guest.js";

    $(document).ready(function() {
        let hyper = $('hyper');
        let page = Location.get();

        new Navigation({
            id: "nav",
            home: ".",
            name: hyper.attr('name'),
        });
        new Filters();

        let routes = [
            {
                prefix: "instance/",
                function: (p) => {
                    let uuid = p.split('/', 2)[1];
                    new Guest({
                        id: ".container",
                        uuid: uuid,
                    });
                },
            },
            {
                prefix: "datastore/",
                function: (p) => {
                    //TODO
                },
            },
            {
                prefix: "network/",
                function: (p) => {
                    //TODO
                },
            },
            {
                prefix: "",
                function: (p) => {
                    new Index({
                        id: ".container",
                        default: "instances",
                        name: hyper.attr('name'),
                    });
                },
            },
        ];

        for (let i = 0; i < routes.length; i++) {
            let rte = routes[i];
            if (page.startsWith(rte.prefix)) {
                rte.function(page);
            }
        }
    });
</script>
</body>
</html>